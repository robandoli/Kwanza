{{ define "main" }}

<article class="pagina">

  <header class="page-header">
    <div class="container">
      <div class="editorial-content">
        <h1>{{ .Title }}</h1>

        {{ $subtitle := "" }}
        {{ if .Params.description }}
          {{ $subtitle = .Params.description }}
        {{ else }}
          {{ with .Parent }}
            {{ $subtitle = .Params.subtitle }}
          {{ end }}
        {{ end }}

        {{ with $subtitle }}
          <p class="lead">{{ . }}</p>
        {{ end }}

        {{ if eq .File.BaseFileName "cantigas" }}
          <div class="musica-busca">
            <input 
              type="search" 
              id="busca-musica" 
              placeholder="Buscar por título ou letra..." 
              aria-label="Buscar músicas"
            >
          </div>
        {{ end }}
      </div>
    </div>
  </header>

  <!-- Imagens de Graduações (apenas na página sistema-de-graduacoes) -->
  {{ if eq .File.BaseFileName "sistema-de-graduacoes" }}
    {{ with .Params.graduacoes }}
    <section class="graduacoes-imagens section">
      <div class="container">
        <div class="editorial-content">
          <div class="graduacoes-grid">
            {{ range . }}
            <figure class="graduacao-item">
              <img 
                src="{{ .imagem }}" 
                alt="{{ .titulo }}"
                loading="lazy"
                decoding="async"
              >
              <figcaption>{{ .titulo }}</figcaption>
            </figure>
            {{ end }}
          </div>
        </div>
      </div>
    </section>
    {{ end }}
  {{ end }}

  <section class="pagina-conteudo section" id="lista-musicas">
    <div class="container">
      <div class="editorial-content">
        {{ .Content }}
      </div>
    </div>
  </section>

</article>

{{ if eq .File.BaseFileName "cantigas" }}
  <script src="/js/busca-musica.js"></script>
{{ end }}

{{ end }}
